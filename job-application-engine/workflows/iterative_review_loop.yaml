version: "1.0"
name: iterative_review_loop
model: gemini-2.5-pro
steps:
  - id: evaluate_cover_letter
    description: HR Simulation agent analyzes cover letter + CV.
    agent: hr_simulation_agent.HRSimulationAgent
    output: hr_feedback
  - id: check_score
    condition: hr_feedback.score >= 85 or loop.iteration >= 5
    on_true:
      - action: workflow.complete
    on_false:
      - id: revise_letter
        description: Cover letter generator revises draft using HR fixes.
        agent: cover_letter_generator_agent.CoverLetterGeneratorAgent
        action: revise
        requires: [hr_feedback]
        output: revised_letter
      - action: workflow.loop
outputs:
  - output/hr_report.json
  - output/revision_history.md
  - output/role_fit_score.json
